# C# 中的參數修飾符（Parameter Modifiers）

## 什麼是參數修飾符
- 參數修飾符是可以應用於方法參數的修飾符，定義如何從調用部分接收參數值。
- C# 支持四個參數修飾符：`default`、`ref`、`out`、`in` 和 `params`。

## C# 中的默認參數修飾符（default Parameter Modifier）
- 當沒有為參數應用任何修飾符時，該參數被稱為"默認"參數修飾符。
- 在這種情況下，傳遞給參數的值不會影響原始參數變量。

### 例子：計算稅金
假設有一個名為 `CalculateTax` 的方法，參數名為 `percentage`。

```csharp
public void CalculateTax(double percentage) {
    percentage = 10.45; // 對參數的修改不影響原始變量
}
```

### 說明
- 在方法內部，對 `percentage` 的修改不會影響原始變量。
- 如果在調用方法之前，原始變量 `p` 的值為 7.4，則在方法內部修改 `percentage` 的值不會改變 `p` 的值。

### 參數的獨立性
- 根據默認參數修飾符，參數和參數變量是獨立的，存儲在各自的堆棧中。
- 這意味著對參數的任何更改不會影響調用方法時傳遞的原始變量。

### 結論
- 默認參數修飾符是 C# 中的一個基本概念，適用於所有類型的方法和參數。
- 理解參數修飾符的使用對於編寫靈活和可維護的代碼至關重要。

## C# 中的 ref 參數修飾符（ref Parameter Modifier）

### 什麼是 ref 參數修飾符
- `ref` 是 C# 中的第二個參數修飾符。
- 當你為參數應用 `ref` 修飾符時，對參數的更改將自動反映在原始參數變量中。

### 使用 ref 的要求
- 在調用方法時，必須傳遞參數變量，而不能傳遞文字值。
- 在方法定義和調用時，必須在參數前加上 `ref` 關鍵字。

### ref 的工作原理
- 當參數變量的值（例如 `10`）被傳遞給方法時，該值將被傳遞到參數中。
- 在方法內部，可以修改該參數的值，並在方法結束時，該值將自動更新回原始參數變量。

### 例子：計算稅金
假設有一個名為 `CalculateTax` 的方法，參數名為 `percentage`，並使用 `ref` 修飾符。

```csharp
public void CalculateTax(ref double percentage) {
    percentage = 10.45; // 將參數的值更新為 10.45
}
```

### 說明
- 當調用 `CalculateTax` 方法時，必須使用 `ref` 修飾符來傳遞參數變量。
- 如果原始變量 `p` 的值為 `7.4`，在方法內部將其更新為 `10.45`，則在方法結束後，`p` 的值將變為 `10.45`。

### 使用 ref 的場景
- 在實際項目中，當需要根據條件修改參數的值並將其返回到調用部分時，使用 `ref` 是合適的。
- 例如，在銀行應用程序中，根據客戶的條件（如年齡或退役軍人身份）來修改利率。

### 結論
- `ref` 參數修飾符允許在方法內部修改參數的值，並將更改反映回原始變量。
- 這在需要雙向通信的情況下非常有用，特別是在需要根據條件修改參數值的場景中。

## C# 中的 out 參數修飾符（out Parameter Modifier）

### 什麼是 out 參數修飾符
- `out` 是 C# 中的一種參數修飾符，用於從方法返回值。
- 在使用 `out` 參數時，參數值不需要在調用方法時初始化，因為它們會在方法內部被賦值。

### out 的工作原理
- 當使用 `out` 修飾符時，方法內部必須為該參數賦值，否則會導致編譯錯誤。
- 在方法結束時，最新的值將自動分配給參數變量。

### 例子：計算稅金
假設有一個名為 `CalculateTax` 的方法，使用 `out` 修飾符來返回稅金和利率。

```csharp
public void CalculateTax(double cost, out double tax, out double interestRate) {
    tax = cost * 0.05; // 計算稅金
    interestRate = 10.45; // 設定利率
}
```

### 說明
- 在調用 `CalculateTax` 方法時，必須使用 `out` 修飾符來接收返回的值。
- 例如：

```csharp
double tax;
double rate;
CalculateTax(10000, out tax, out rate);
```

- 在這個例子中，`tax` 和 `rate` 將分別接收計算出的稅金和利率。

### out 與 ref 的區別
- **ref**：在使用 `ref` 時，必須在調用方法時初始化參數變量，並且方法內部的更改會反映回原始變量。
- **out**：在使用 `out` 時，參數變量不需要初始化，並且方法內部必須為其賦值。

### 使用 out 的場景
- 在實際項目中，當需要從方法返回多個值時，使用 `out` 參數是非常有用的。
- 例如，在銀行應用程序中，可能需要返回利率和罰款金額。

### 結論
- `out` 參數修飾符允許方法返回多個值，並且不需要在調用時初始化參數。
- 這在需要從方法中返回多個結果的情況下非常有用，特別是在需要根據計算結果返回不同的值時。

# C# 中的 out 變量聲明（Out Variable Declaration）

### 什麼是 out 變量聲明
- `out` 變量聲明是 C# 7 中引入的一個新特性。
- 它允許在將值傳遞給 `out` 參數的同時聲明參數變量。

### 使用 out 變量聲明的方式
- 在使用 `out` 修飾符時，可以直接在同一行中聲明參數變量的類型。
- 這樣可以避免在調用方法之前單獨聲明參數變量。

### 例子：計算稅金
假設有一個名為 `CalculateTax` 的方法，使用 `out` 修飾符來返回稅金和利率。

```csharp
public void CalculateTax(double cost, out double tax, out double interestRate) {
    tax = cost * 0.05; // 計算稅金
    interestRate = 10.45; // 設定利率
}
```

### 使用 out 變量聲明
在 C# 7 中，可以這樣調用方法：

```csharp
CalculateTax(10000, out double tax, out double rate);
```

### 說明
- 在這個例子中，`tax` 和 `rate` 變量在調用 `CalculateTax` 方法時被聲明。
- 不需要在方法調用之前單獨聲明這些變量。

### 優勢
- 使用 `out` 變量聲明可以使代碼更簡潔，減少冗餘的變量聲明。
- 提高了代碼的可讀性，因為變量的聲明和使用在同一行中。

### 結論
- `out` 變量聲明是 C# 7 中的一個有用特性，允許在傳遞 `out` 參數時同時聲明變量。
- 這使得代碼更加簡潔和易於理解，特別是在需要返回多個值的情況下。

# C# 中的 in 參數修飾符（in Parameter Modifier）

### 什麼是 in 參數修飾符
- `in` 是 C# 7 中引入的一種參數修飾符。
- 根據 `in` 參數修飾符，參數值將像默認參數一樣傳遞給參數，但參數變為只讀（readonly）。

### in 的特性
- 你不能在方法定義中修改參數的值。
- 如果試圖將值賦給參數，將會產生編譯時錯誤。
- 參數值被賦給形參後，可以在方法內部讀取，但無法修改。

### 例子：計算稅金
假設有一個名為 `CalculateTax` 的方法，使用 `in` 修飾符來接收百分比參數。

```csharp
public void CalculateTax(in double percentage) {
    // 嘗試修改 percentage 將導致編譯錯誤
    // percentage = 10.45; // 編譯錯誤：'percentage' 是只讀的
    double tax = 100 * (percentage / 100); // 使用 percentage 計算稅金
}
```

### 說明
- 在這個例子中，`percentage` 參數被聲明為 `in`，因此無法在方法內部修改其值。
- 你可以使用從參數變量接收的值進行計算，但不能改變它。

### 使用 in 的好處
- `in` 參數修飾符可以避免參數的意外變化，確保計算的正確性。
- 在實際項目中，當你希望保護參數不被修改時，使用 `in` 是合適的。

### in 與其他參數修飾符的比較
- **default**：參數可以被修改，沒有額外的限制。
- **ref**：參數的值可以在方法內部修改，並且修改會反映回原始變量。
- **out**：參數不需要初始化，並且在方法內部必須賦值，返回給調用者。

### 結論
- `in` 參數修飾符提供了一種安全的方式來傳遞參數，避免意外的修改。
- 在需要保護參數值的情況下，使用 `in` 是一個良好的編碼習慣。

# C# 中的 params 參數修飾符（params Parameter Modifier）

### 什麼是 params 參數修飾符
- `params` 是一種參數修飾符，用於接收一組作為數組的值。
- 它允許方法接收可變數量的參數，這些參數會被自動封裝成一個數組。

### 使用 params 的方式
- 在方法定義中，`params` 修飾符必須用於最後一個參數。
- 參數類型必須是數組類型，例如 `int[]` 或 `string[]`。

### 例子：顯示科目
假設有一個名為 `DisplaySubjects` 的方法，用於顯示學生的科目。

```csharp
public void DisplaySubjects(params string[] subjects) {
    for (int i = 0; i < subjects.Length; i++) {
        Console.WriteLine(subjects[i]); // 打印每個科目
    }
}
```

### 說明
- 在這個例子中，`subjects` 參數使用 `params` 修飾符，允許傳遞任意數量的科目。
- 使用 `for` 循環遍歷 `subjects` 數組，打印每個科目。

### 使用 params 的好處
- 當你不知道要接收多少個參數時，`params` 是最佳選擇。
- 它使得方法調用更加靈活，開發者可以根據需要傳遞任意數量的參數。

### 實際應用
- 在實際項目中，`params` 修飾符非常有用，例如在銀行應用程序中，當你希望找出交易金額最高的交易，但不知道用戶會傳遞多少交易時。

### 結論
- `params` 參數修飾符提供了一種簡便的方式來接收可變數量的參數，並將其封裝成數組。
- 這使得方法的使用更加靈活，特別是在需要處理不確定數量的參數時。


## C# 參數修飾符比較表

| 參數修飾符 | 特性 | 優勢 | 限制 |
|------------|------|------|------|
| **default** | - 無修飾符，默認情況下的參數。<br>- 參數值不會影響原始變量。 | - 簡單易用，適用於所有類型的方法。 | - 參數值可以被修改，但不會影響原始變量。 |
| **ref** | - 參數的值在方法內部可以被修改。<br>- 需要在調用和定義時使用 `ref` 關鍵字。 | - 允許雙向通信，方法內部的修改會反映回原始變量。 | - 必須在調用時初始化參數變量，且不能傳遞文字值（必須是變量）。 |
| **out** | - 參數的值在方法內部必須被賦值。<br>- 不需要在調用時初始化參數變量。 | - 允許從方法返回多個值。<br>- 參數值會在方法結束時自動分配給原始變量。 | - 必須在方法內部為參數賦值，否則會導致編譯錯誤。<br>- 參數在方法調用時不需要初始化。 |
| **in** | - 參數變為只讀，無法在方法內部修改。<br>- 需要在定義時使用 `in` 關鍵字。 | - 避免意外修改參數值，確保計算的正確性。 | - 參數值可以被讀取，但不能被修改。 |
| **params** | - 允許接收可變數量的參數，並將其封裝成數組。<br>- 只能用於方法的最後一個參數。 | - 提高方法的靈活性，適用於不確定數量的參數。 | - 只能用於一個方法，且必須是最後一個參數。 |

## ref 和 out 的主要區別
- `ref` 和 `out` 的主要區別在於：
  - `ref` 需要在調用時初始化參數變量，並且可以在方法內部修改該變量的值，這些修改會反映回原始變量。
  - `out` 不需要在調用時初始化參數變量，但必須在方法內部為其賦值，並且這些值會在方法結束時返回給調用者。
- 根據需求選擇合適的參數修飾符可以提高代碼的可讀性和可維護性。
